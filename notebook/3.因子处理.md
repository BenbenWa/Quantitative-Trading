

# 因子处理



## 去极值（异常值处理）



1. 均值方差法3σ：求每个因子的的均值u和方差σ，大于u+3σ和小于u-3σ的值转化为u+3σ和u-3σ
   - 先计算因子的平均值u和标准差σ
   - 确认参数n（n=3时为3σ法），因子的合理范围为[X_mean-nσ，X_mean+nσ]
2. 绝对值差中位数法mad：计算所有因子与平均值之间的距离总和来检测离群值
   - 先找出所有因子的中位数X_meadian
   - 得到每一个因子与中位数的绝对偏差值Xi-X_meadian
   - 得到绝对偏差值的中位数mad，最后确定参数n，合理范围为[X_meadian-nmad，X_meadian+nmad]
3. 分位数法（箱型图）





## 因子中性化

原因：A股的行业轮动明显，行业热点之间切换迅速，并且A股小市值个股占比明显，高波动率高收益率

目的：

- 降低投资组合的波动性和回测
- 为了在用某一因子时能够剔除其他因素的影响，使得选出的股票更加分散，需要进行中性化处理
- 为了消除因子中的偏差和不必要的影响

对于因子来说，中性化主要考虑市场风险和行业风险。

行业中性:多头组合的行业配置与对冲基准的行业配置一致，目的在于剔除行业因子对策略收益的影响，仅考察行业内部个股的超额收益。（行业中性策略的净值曲线往往比较平稳，回测较小）

风格因子中性:多头组合的风格因子较之对冲基准的风险暴露为0，目的在于使多头组合的风格特征完全与对冲基准相匹配，使得组合的超额收益不是来自于某类风格

1. 行业中性化

   行业中性化一般采用两种方式处理

   - 简单的标准化法

     利用申万行业指数，将各个行业的因子进行标准化处理，即减去均值除以标准差

   - 回归取残差法

     将因子值作为y，行业哑变量作为x，进行线性回归，回归模型的残差即为行业中性化后的因子值

2. 市值中性化

   因为市值因子是连续的，采用回归残差法