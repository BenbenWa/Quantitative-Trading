# 多因子模型构建

多因子模型是个较为复杂的体系，模型的构建流程往往包括以下几个方面：

 ![量化基础知识03](https://github.com/Miya-Su/Quantitative-Trading/tree/miya/image/量化基础知识03.png)



### 样本筛选

全体 A 股 ，为了使测试结果更符合投资逻辑，设定了三条样本筛选规则： 

（1） 剔除选股日的 ST/PT 股票； 

（2） 剔除上市不满一年的股票； 

（3） 剔除选股日由于停牌等原因而无法买入的股票。 



### 数据清洗

避免可能的数据错误和极端数据对测试结果产生影响，使用标准化后的数据保证最终得到的模型的稳健性。数据清洗的内容主要包括两部分，异常值和缺失值的处理。 

常见的因子标准化方法包括：Z 值标准化（Z-Score），Rank 标准化，风格 标准化等等。 由于 Rank 标准化后的数据会丢失原始样本的一些重要信息，这里我们仍然 选择 Z 值标准化来处理因子数据。 





### 因子测试

有效的单因子首先应该具有一定的逻辑支撑，其次则是与股票收益率的相关性较为显著

#### 单因子测试

截面回归（Cross-Section Regression）是目前业界较常用于因子测试的方法，相比全样本面板回归（Panel Data Regression）的方法，截面回归更有利于对因子变化趋势的捕捉。

我们选择每期针对全体样本做一次回归，回归时因子暴露为已知变量，回归 得到每期的一个因子收益值𝑓𝑗，在通过多期回归后我们就可以得到因子值𝑓𝑗 的序列，也就是因子收益率序列，同时可以得到 t 值序列，也就是因子值与 股票收益率相关性的t检验得到的t值。 

针对这两个序列我们将通过以下几个指标来判断 该因子的有效性以及稳定性： 

（1） 因子收益序列𝑓𝑖的假设检验 t 值 

（2） 因子收益序列𝑓𝑖大于 0 的概率 

（3） t 值绝对值的均值 

（4） t 值绝对值大于等于 2 的概率 

IC 值（信息系数）是指个股第 t 期在因子 i 上的因子暴露（剔除行业与市值 后）与 t + 1 期的收益率的相关系数。通过计算 IC 值可以有效的观察到某个因子收益率预测的稳定性和动量特征，以便在优化组合时用作筛选的指标。 常见的计算 IC 值方法有两种：相关系数（Pearson Correlation） 和秩相关系数（ Spearman Rank Correlation）。 

由于 Pearson 相关系数计算时假设变量具有相等间隔以及服从正态分布，而 这一假设往往与因子值和股票收益率的分布情况相左。因此我们将采用 Spearman 的方法计算因子暴露与下期收益率的秩相关性 IC 值。类似回归法 的因子测试流程，我们在计算 IC 时同样考虑剔除了行业因素与市值因素。 

同样我们会得到一个 IC 值序列，类似的，我们将关注以下几个与 IC 值相关 的指标来判断因子的有效性和预测能力： 

（1） IC 值的均值

（2） IC 值的标准差 

（3） IC 大于 0 的比例 

（4） IC 绝对值大于 0.02 的比例 

（5） IR （IR = IC 均值/IC 标准差） 

#### 多因子测试

在完成单个因子的测试之后，就位多因子模型的构建打下了坚实的基础。我们可以通过下面几个步骤来剔除同类因子之间的多重共线性影响，筛选出同时具有良好的单调性和预测性的有效因子，构造我们的多因子模型： 

根据上文的截面回归因子测试方法，我们可以轻松的得到每个因子的因子暴 露值序列和因子 IC 值序列。在研究因子间共线性时，就可以通过计算因子 间 IC 值和因子暴露值得相关性来求证因子间的共线性。

需要注意的是，经济含义相似度较高的同类型因子往往存在明显的正相关性， 在处理此类因子时，我们可以通过一些方法将因子进行合并；而如果是经济 含义差异较大因子之间存在明显相关性，就需要有所取舍。 

消除共线性的方法包括以下几种： 

（1） 在同类因子的共线性较大的几个因子中，保留有效性最高的因子， 剔除余下的因子 

（2） 因子组合：方法包括等权加权，以因子收益 f 为权重加权，以及 PCA 主成分分析法等等 

（3） 暴力迭代法，即将因子两两组合暴力迭代得到表现最好的组合方法。

在对因子集做残差的异方差分析处理之后，就可以进行多元线性回归，估计每期的因子收益序列。 





 ![量化基础知识04](https://github.com/Miya-Su/Quantitative-Trading/tree/miya/image/量化基础知识04.png)






